<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/ddsCtrlerDemo-/frontendOnly/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
  <script type="module" crossorigin src="/ddsCtrlerDemo-/frontendOnly/assets/index.616d966e.js"></script>
  <link rel="stylesheet" href="/ddsCtrlerDemo-/frontendOnly/assets/index.104b38e7.css">
</head>

<body>
    <div id="app"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
        integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
        crossorigin="anonymous"></script>
    <script type="text/javascript" charset="utf-8">
        let underthreshold = 0;
        var timer = new Date().getTime();
        class Options {
            constructor() {
                this.digital = [];
                this.sinewave = [];
            }

            toData() {
                return 'data' //todo
            }
        }

        var options = new Options();

        /*var socket = io.connect('ws://192.168.1.21:5000', {
            timeout: 300000,
            reconnectionDelayMax: 1000,
            reconnectionDelay: 500
        })

        socket.on('connect', function () {
            socket.emit('message', 'connected');
            //socket.emit('timer', { time: new Date().getTime() });
        });

        socket.on('timer', function (data) {
            let timediff = new Date().getTime() - data.time;
            if (timediff > 10) {

                console.log("diff:" + timediff + " oks:" + underthreshold)
                underthreshold = 0
            } else {
                underthreshold += 1
            }
            //console.log(new Date().getTime()-data.time);
            socket.emit('timer', { time: new Date().getTime() });
        })

        socket.on('message', function (data) {
            console.log(data)
            //socket.emit('message',  "test" );
        })
          /*setInterval(function () {
            socket.emit('message',  "test" );
        }, 1000)*/

    </script>

</body>

</html>
